<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Animate cases on a process map — animate_process • processanimateR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Animate cases on a process map — animate_process" />

<meta property="og:description" content="A function for creating a SVG animation of an event log on a process map created by processmapR." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">processanimateR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/use-with-shiny.html">Use processanimateR and Shiny</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fmannhardt/processanimateR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Animate cases on a process map</h1>
    <small class="dont-index">Source: <a href='https://github.com/fmannhardt/processanimateR//blob/master/R/processanimateR.R'><code>R/processanimateR.R</code></a></small>
    <div class="hidden name"><code>animate_process.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>A function for creating a SVG animation of an event log on a process map created by processmapR.</p>
    
    </div>

    <pre class="usage"><span class='fu'>animate_process</span>(<span class='no'>eventlog</span>, <span class='kw'>processmap</span> <span class='kw'>=</span> <span class='fu'>process_map</span>(<span class='no'>eventlog</span>, <span class='kw'>render</span> <span class='kw'>=</span> <span class='no'>F</span>,
  <span class='no'>...</span>), <span class='kw'>animation_mode</span> <span class='kw'>=</span> <span class='st'>"absolute"</span>, <span class='kw'>animation_duration</span> <span class='kw'>=</span> <span class='fl'>60</span>,
  <span class='kw'>animation_jitter</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>animation_timeline</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>token_size</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>token_color</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>token_image</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>token_opacity</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>token_shape</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"circle"</span>, <span class='st'>"rect"</span>), <span class='kw'>token_options</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>width</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>eventlog</th>
      <td><p>The event log object that should be animated</p></td>
    </tr>
    <tr>
      <th>processmap</th>
      <td><p>The process map created with processmapR that the event log should be animated on,
if not provided a standard process map will be generated by using processmapR::process_map.</p></td>
    </tr>
    <tr>
      <th>animation_mode</th>
      <td><p>Whether to animate the cases according to their actual time of occurence ("absolute") or to start all cases at once ("relative").</p></td>
    </tr>
    <tr>
      <th>animation_duration</th>
      <td><p>The overall duration of the animation, all times are scaled according to this overall duration.</p></td>
    </tr>
    <tr>
      <th>animation_jitter</th>
      <td><p>The magnitude of a random coordinate translation, known as jitter in scatterplots, which is added to each token. Adding jitter can help to disambiguate tokens traveling on top of each other.</p></td>
    </tr>
    <tr>
      <th>animation_timeline</th>
      <td><p>Whether to render a timeline slider in supported browsers (Recent versions of Chrome and Firefox only).</p></td>
    </tr>
    <tr>
      <th>token_size</th>
      <td><p>The event attribute (character) or alternatively a data frame with three columns (case, time, size) matching the case identifier of the supplied event log.
The token size is scaled accordingly during the animation (default size is 4). You may use <code><a href='add_token_size.html'>add_token_size</a></code> to add a suitable attribute to the event log.</p></td>
    </tr>
    <tr>
      <th>token_color</th>
      <td><p>The event attribute (character) or alternatively a data frame with three columns (case, time, color) matching the case identifier of the supplied event log.
The token color is change accordingly during the animation (default color is orange). You may use <code><a href='add_token_color.html'>add_token_color</a></code> to add a suitable attribute to the event log.</p></td>
    </tr>
    <tr>
      <th>token_image</th>
      <td><p>The event attribute (character) or alternatively a data frame with three columns (case, time, image) matching the case identifier of the supplied event log.
The token image is change accordingly during the animation (by default a SVG shape is used).</p></td>
    </tr>
    <tr>
      <th>token_opacity</th>
      <td><p>The event attribute (character) or alternatively a data frame with three columns (case, time, transparency) matching the case identifier of the supplied event log.
The token fill-opacity is change accordingly during the animation (by default the token is dranw with 0.9 opacity).</p></td>
    </tr>
    <tr>
      <th>token_shape</th>
      <td><p>The (fixed) SVG shape to be used to draw tokens. Can be either 'circle' (default) or 'rect'.</p></td>
    </tr>
    <tr>
      <th>token_options</th>
      <td><p>A list of additional (fixed) SVG properties to be added to each token.</p></td>
    </tr>
    <tr>
      <th>width, height</th>
      <td><p>Fixed size for widget (in css units). The default is NULL, which results in intelligent automatic sizing based on the widget's container.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Options passed on to <code>process_map</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>processmapR:process_map</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Load example event log</span>
<span class='fu'>library</span>(<span class='no'>eventdataR</span>)

<span class='co'># Animate the process with default options (absolute time and 60s duration)</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>)

<span class='co'># Animate the process with default options (relative time and with jitter)</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>, <span class='kw'>animation_mode</span> <span class='kw'>=</span> <span class='st'>"relative"</span>, <span class='kw'>animation_jitter</span> <span class='kw'>=</span> <span class='fl'>10</span>)

<span class='co'># Change default token sizes</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>, <span class='kw'>token_size</span> <span class='kw'>=</span> <span class='fl'>2</span>)

<span class='co'># Change default token color</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>, <span class='kw'>token_color</span> <span class='kw'>=</span> <span class='st'>"red"</span>)

<span class='co'># Change default token opacity</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>, <span class='kw'>token_opacity</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)</div><div class='input'><span class='co'># Change default token image (GIFs work too)</span>
<span class='fu'>animate_process</span>(<span class='no'>patients</span>, <span class='kw'>token_image</span> <span class='kw'>=</span> <span class='st'>"https://upload.wikimedia.org/wikipedia/en/5/5f/Pacman.gif"</span>)

<span class='co'># Change token color based on a numeric attribute, here the nonsensical 'time' of an event</span>
<span class='fu'>animate_process</span>(<span class='fu'><a href='add_token_color.html'>add_token_color</a></span>(<span class='no'>patients</span>, <span class='st'>"time"</span>, <span class='st'>"color"</span>), <span class='kw'>token_color</span> <span class='kw'>=</span> <span class='st'>"color"</span>)

<span class='co'># Change token color based on a factor attribute</span>
<span class='fu'>animate_process</span>(<span class='fu'><a href='add_token_color.html'>add_token_color</a></span>(<span class='no'>patients</span>, <span class='st'>"employee"</span>, <span class='st'>"color"</span>,
                <span class='kw'>color_mapping</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_factor</a></span>(<span class='st'>"Set3"</span>, <span class='no'>patients</span>$<span class='no'>employee</span>)),
                <span class='kw'>token_color</span> <span class='kw'>=</span> <span class='st'>"color"</span>)

<span class='co'># Next example requires the 'dplyr' and 'edeaR' packages</span>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'dplyr'</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:stats':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:base':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='fu'>library</span>(<span class='no'>edeaR</span>)

<span class='co'># Change token_color based on colors in a second data frame</span>
<span class='co'># Extract only the lacticacid measurements</span>
<span class='no'>lactic</span> <span class='kw'>&lt;-</span> <span class='no'>sepsis</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>lacticacid</span> <span class='kw'>=</span> <span class='fu'>as.numeric</span>(<span class='no'>lacticacid</span>)) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/edeaR/topics/filter_activity'>filter_activity</a></span>(<span class='fu'>c</span>(<span class='st'>"LacticAcid"</span>)) <span class='kw'>%&gt;%</span>
    <span class='fu'>as.data.frame</span>() <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='st'>"case"</span> <span class='kw'>=</span> <span class='no'>case_id</span>, <span class='st'>"time"</span> <span class='kw'>=</span>  <span class='no'>timestamp</span>, <span class='no'>lacticacid</span>)
<span class='co'># Create a numeric color scale</span>
<span class='no'>cscale</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_numeric</a></span>(<span class='st'>"Oranges"</span>, <span class='no'>lactic</span>$<span class='no'>lacticacid</span> , <span class='kw'>na.color</span> <span class='kw'>=</span> <span class='st'>"white"</span>)
<span class='co'># Create colors data frame for animate_process</span>
<span class='no'>lacticColors</span> <span class='kw'>&lt;-</span> <span class='no'>lactic</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>color</span> <span class='kw'>=</span> <span class='fu'>cscale</span>(<span class='no'>lacticacid</span>))
<span class='no'>sepsisBase</span> <span class='kw'>&lt;-</span> <span class='no'>sepsis</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/edeaR/topics/filter_activity'>filter_activity</a></span>(<span class='fu'>c</span>(<span class='st'>"LacticAcid"</span>, <span class='st'>"CRP"</span>, <span class='st'>"Leucocytes"</span>, <span class='st'>"Return ER"</span>,
                      <span class='st'>"IV Liquid"</span>, <span class='st'>"IV Antibiotics"</span>), <span class='kw'>reverse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/edeaR/topics/filter_trace_frequency'>filter_trace_frequency</a></span>(<span class='kw'>percentage</span> <span class='kw'>=</span> <span class='fl'>0.95</span>)
<span class='fu'>animate_process</span>(<span class='no'>sepsisBase</span>, <span class='kw'>token_color</span> <span class='kw'>=</span> <span class='no'>lacticColors</span>, <span class='kw'>animation_mode</span> <span class='kw'>=</span> <span class='st'>"relative"</span>,
                <span class='kw'>animation_duration</span> <span class='kw'>=</span> <span class='fl'>600</span>)</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Felix Mannhardt &lt;felix.mannhardt@sintef.no&gt; (SINTEF Digital)

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Felix Mannhardt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

